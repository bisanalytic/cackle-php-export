Сackle PHP - решение для экспорта комментариев в Cackle
==========
Данное решение позволяет интегрировать комментарии Cackle в сайт на PHP и включает:

1. Синхронизацию комментариев с Cackle в вашу локальную БД
2. Отображение комментариев в видже html для индексации
3. Экспорт комментариев из вашей БД в Cackle


Установка

Для информации: Файл cackle_admin.php ялвяется админкой для данного решения. Туда вводятся API ключи, проивзодится синхронизация, и экспорт комментариев.

1. Необходимо убедиться, что модули pdo & curl extentions активированы в php.ini вашего сервера:
для этого нужно найти строчки:
extension=pdo.so
extension=pdo_mysql.so
и раскомментировать их.

2. В cackle_api ввести данные к БД и префикс.
3. На странице cackle_admin.php ввести ключи с админ панели Cackle -> Комментарии -> Установить и нажать Activate
4. Выполнить прилагаемый sql исправив там префикс dle_ на свой

Если у вас новый сайт и нет комментариев для экспорта до достаточно только сделать инклуд файла cackle_template.php.

Если у вас уже есть комментарии то:
В файлах cackle_admin.php и export.php, cackle_sync делаете поиск "_comments (всесте с кавычкой и префиксом) и заменяете на свою, например "_jcomments

Экспорт 

В случае если вам нужно экспортировать комментарии в Cackle, и хранить их вместе со своими в одной БД то нужно:

1. Теперь важно понять, какой будет идентификатор у ваших комментариев. Смотрим как вы определяете идентификатор когда вставляете виджет 
cackle_widget.push({widget: 'Comment', id: $site_id, channel: '$object_id'});

2. Удостовериться, что в бд с комментариями лежат необходимые для экспорта комментарии и идентификатор поста находится в поле post_id(вы можете изменить поля, тогда потребуется в функции cackle_export_wp в $comments_query = "SELECT * FROM ".PREFIX."_comments WHERE post_id = $post" post_id заменить на ваше поле идентификатора.. для joomla это object_id) 
и в этом же файле в <wp:comment> проставить у $c соответствующие поля вашей БД.

3. Нажать кнопку экспорт

Синхронизация

P.S. данное решение стоит использовать для экспорта.. для синхронизации - https://bitbucket.org/cackle-plugin/comment-php/
